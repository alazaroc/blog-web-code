---
layout: post
title: How to deploy a web with Amplify Hosting
date: 2022-03-15 21:13 +0100
last_modified_at:
description: I use Amplify hosting to deploy my blog and in this post, I will explain how to do it step by step. The source code is public, so you can also do it if you want to
category:
- DevOps
tags:
- how-to
- amplify
- github
- devops
published: true
pin: false
featured_post: false
comments: true
sitemap: true
img_path: /assets/img/posts/2022-03-15-how-to-deploy-a-web-with-amplify/
---
---

> Updated April 2023. I have updated this article to add more information about AWS Amplify.
{: .prompt-tip }

## TLDR

This is a practical use case where I will explain step by step how I deployed my blog using Amplify Hosting. I will use the AWS Console to do it.

The source code of my blog (web) is available [here](https://github.com/alazaroc/blog-web-code/){:target="_blank"}

## Introduction

> *[AWS Amplify](https://aws.amazon.com/amplify/){:target="_blank"} is a set of purpose-built tools and features that enables frontend web and mobile developers to quickly and easily build full-stack applications on AWS.*
>
> *Amplify provides two services: Amplify Hosting and Amplify Studio.*
>
> - ***Amplify Hosting** provides a git-based workflow for hosting full-stack serverless web apps with continuous deployment.*
> - ***Amplify Studio** is a visual development environment that simplifies the creation of scalable, full-stack web and mobile apps. Use Studio to build your frontend UI with a set of ready-to-use UI components, create an app backend, and then connect the two together.*

> AWS Amplify is the fastest and easiest way to develop and deploy reliable and scalable mobile/web applications on AWS
{: .prompt-tip }

## How to deploy a web with Amplify

We need to have our code ready to be deployed in a supported repository.

- Supported repositories: GitHub, Bitbucket, GitLab and AWS CodeCommit.
- Another option is to deploy manually with drag and drop, Amazon S3 or any URL.

In AWS Console, enter to AWS Amplify service and choose `Amplify Hosting`

a) If you don't have an Amplify app, this screen appears and you have to click on <kbd>Get Started</kbd>

![amplify1.1](amplify-1.1-new.png){:class="border"}

and then choose <kbd>Amplify Hosting</kbd>

![amplify1.2](amplify-1.2-new.png){:class="border"}  

b) If you already have an Amplify resource click on <kbd>New app</kbd> and <kbd>Host web app</kbd>

![amplify2](amplify-2.png){:class="border"}

**Configure Amplify Hosting**:

The first step to setting up Amplify Hosting is to connect your repository. In my case, I chose <kbd>GitHub</kbd>
  ![amplify3](amplify-3.png){:class="border"}

Add repository branch: choose your repository and your branch
  ![amplify4](amplify-4.png){:class="border"}

Configure build settings: Advanced settings are optional, allow you to reference your build image, add environment variables and override default installed packages
  ![amplify5](amplify-5.png){:class="border"}

Review the configuration and click <kbd>Save and deploy</kbd>
  ![amplify6](amplify-6.png){:class="border"}

Now Amplify must be provisioned, built, deployed and verified
  ![amplify7](amplify-7.png){:class="border"}

At this moment an email notification will be sent to your email (at least in the GitHub case)
  ![amplify3.2](amplify-3.2-github.png){:class="border"}

When finished, you will be able to access the new URL generated by Amplify
  ![amplify8](amplify-8-web.png){:class="border"}
  ![amplify9](amplify-9-web.png){:class="border"}
  
## Additional configuration

In the following lines, we will review how to apply additional configuration to add more value to our website.

### How to associate my web with my domain name

We can also set up our Domain Name to our deployed website with Amplify Hosting easily.

To register the domain name I used <kbd>Amazon Route53</kbd>.
> Use **Route53** is not the cheapest option (e.g. I paid $12 to register the new domain with Route53 instead of $1 the first year with GoDaddy), but it's worth it (to me)
{: .prompt-tip }

In the side menu, click <kbd>Domain management</kbd>, and then click <kbd>Add domain</kbd>.

![amplify10](amplify-10-domain.png){:class="border"}

Choose your Domain and click on <kbd>Save</kbd>. As I register my domain with Route53, it appears in the text field when I click on it.

![amplify11](amplify-11.png){:class="border"}

Now you can choose the branch, the subdomains and check for automatic redirect from HTTP to HTTPS, and click <kbd>Save</kbd>.

![amplify12](amplify-12.png){:class="border"}

It may take several minutes to complete. First, you need to create the SSL certificate, then configure the SSL and finally activate it.

![amplify13](amplify-13.png){:class="border"}
![amplify14](amplify-14.png){:class="border"}

If we access the main page we can see that the URL has changed.

![amplify15](amplify-15-web-2.png){:class="border"}

We can now access it with our domain name:

![amplify16](amplify-16-web-2.png){:class="border"}

That's it, quick and easy!

### How to deploy different versions of the application

Configuring AWS Amplify Hosting to deploy several versions of the website is very easy, you just need **different branches in the repository** and configure them in the service as follows:

![amplify-branches](amplify-branches.png){:class="border"}

![amplify-branches-deployment](amplify-branches-deployment.png){:class="border"}

### How to preview changes before applying them to production

Using the <kbd>preview</kbd> feature you can preview changes **before merging a pull request**.

To do that you have to:

1. Create a new branch
2. Enable `previews` and associate with your branch
3. Open a pull request --> A new version of the application will be deployed

![amplify-preview](amplify-preview.png){:class="border"}

![amplify-preview-enable](amplify-preview-enable.png){:class="border"}

### How to protect any environment

If you want to protect any environment to don't be accessible by everyone, you can use the feature of <kbd>Access Control</kbd>. With this option, you can create a simple user/password to restrict access to your web:

![amplify-access-control](amplify-access-control.png){:class="border"}

There are only 2 options for the option `Access settings`:

- Publicly available
- Restricted - password required

![amplify-access-control-pass](amplify-access-control-pass.png){:class="border"}

When you try to access now to the web you have to log in yo view the content:

![amplify-access-control-web](amplify-access-control-web.png){:class="border"}
