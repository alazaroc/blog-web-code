<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="How to create serverless applications with SAM" /><meta property="og:locale" content="en" /><meta name="description" content="SAM (Serverless Application Model) is an open-source framework that you can use to build serverless applications on AWS and I will show you how it works." /><meta property="og:description" content="SAM (Serverless Application Model) is an open-source framework that you can use to build serverless applications on AWS and I will show you how it works." /><link rel="canonical" href="https://www.playingaws.com//posts/how-to-create-serverless-applications-with-sam/" /><meta property="og:url" content="https://www.playingaws.com//posts/how-to-create-serverless-applications-with-sam/" /><meta property="og:site_name" content="Playing AWS" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-04-09T15:07:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="How to create serverless applications with SAM" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-04-15T10:39:52+02:00","datePublished":"2022-04-09T15:07:00+02:00","description":"SAM (Serverless Application Model) is an open-source framework that you can use to build serverless applications on AWS and I will show you how it works.","headline":"How to create serverless applications with SAM","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.playingaws.com//posts/how-to-create-serverless-applications-with-sam/"},"url":"https://www.playingaws.com//posts/how-to-create-serverless-applications-with-sam/"}</script><title>How to create serverless applications with SAM | Playing AWS</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Playing AWS"><meta name="application-name" content="Playing AWS"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/favicons/favicon.ico" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Playing AWS</a></div><div class="site-subtitle font-italic">Learn, remove barriers and practice</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://www.linkedin.com/in/alejandro-lazaro-chueca/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://github.com/alazaroc" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>How to create serverless applications with SAM</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"> <img src="/assets/img/header.jpeg" alt="header"><h1 data-toc-skip>How to create serverless applications with SAM</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1649509620" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 9, 2022 </em> </span> <span> Updated <em class="" data-ts="1681547992" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 15, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/alejandro-lazaro-chueca/">Alejandro Lazaro</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3466 words"> <em>19 min</em> read</span></div></div></div><div class="post-content"><hr /><h2 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The AWS Serverless Application Model (AWS SAM) is an <a href="https://github.com/aws/serverless-application-model" target="_blank">open-source framework</a> that you can use to build serverless applications on AWS.</p><p>A <strong>serverless application</strong> is more than just a Lambda Function. It is a combination of Lambda functions, event sources, APIs, databases, and other resources that work together to perform tasks.</p><p>SAM is an <code class="language-plaintext highlighter-rouge">extension of AWS CloudFormation</code> but SAM is streamlined and specifically designed for Serverless resources.</p><blockquote class="prompt-info"><div><p>SAM is the specific IaC solution of AWS for defining and deploying Lambda applications without the need to ever touch the AWS Console.</p></div></blockquote><h3 id="benefits-of-sam"><span class="mr-2">Benefits of SAM</span><a href="#benefits-of-sam" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Local Testing and Debugging</strong><ul><li>With the <code class="language-plaintext highlighter-rouge">aws sam cli</code> you can execute and test your serverless applications on your local (by mounting a docker image and running the code)</ul><li><strong>Extension of AWS Cloud Formation</strong><ul><li>You get reliability on the deployment capabilities<li>You are also able to use in the SAM YAML template all of the resources that are available in CloudFormation</ul><li><strong>Single Deployment Configuration</strong><ul><li>You can easily manage all your necessary resources in one single place that belongs to the same stack</ul><li><strong>Built-in best practices</strong><ul><li>You can define and deploy your infrastructure as config<ul><li>you can enforce code reviews<li>you can enable safe deployments through CodeDeploy<li>you can enable tracing by using AWS X-Ray</ul></ul><li><strong>Deep integration with development tools</strong><ul><li>AWS Serverless Application Repository: discover new applications<li>AWS Cloud9 IDE: For authoring, testing, and debugging<li>CodeBuild, CodeDeploy, and CodePipeline: To build a deployment pipeline<li>AWS CodeStar: To get started with a project structure, code repository, and a CI/CD pipeline that’s automatically configured for you</ul></ul><h3 id="basics"><span class="mr-2">Basics</span><a href="#basics" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To understand the code structure of the SAM projects, five files are particularly important:</p><ul><li><strong>src/handlers/file.js</strong>: <code class="language-plaintext highlighter-rouge">src</code> folder contains the code for the application’s Lambda Function.<li><strong>__tests__/unit/handlers/file.test.js</strong>: <code class="language-plaintext highlighter-rouge">test</code> folder contains the unit tests for the application code.<li><strong>events/file.json</strong>: <code class="language-plaintext highlighter-rouge">events</code> folder contains the invocation events that you can use to invoke the function.<li><strong>template.yaml</strong>: This file contains the AWS SAM template that defines your application’s AWS resources.<li><strong>package.json</strong>: This file of NodeJS contains the application dependencies and is used for the <code class="language-plaintext highlighter-rouge">sam build</code>. If you are using Python language instead of NodeJS, the file will be <strong>requirements.txt</strong>.</ul><blockquote class="prompt-info"><div><p>The location of Lambda Functions or Unit Tests could change! In some examples, a folder with the name of the lambda is created and inside is located the lambda function and the unit tests.</p></div></blockquote><h4 id="example-of-lambda-function"><span class="mr-2">Example of Lambda Function</span><a href="#example-of-lambda-function" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This is the <code class="language-plaintext highlighter-rouge">template.yaml</code> content for a Lambda Function:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="c1"># The AWSTemplateFormatVersion identifies the capabilities of the template</span>
<span class="c1"># https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/format-version-structure.html</span>
<span class="na">AWSTemplateFormatVersion</span><span class="pi">:</span> <span class="s">2010-09-09</span>
<span class="na">Description</span><span class="pi">:</span> <span class="pi">&gt;-</span>
  <span class="s">sam-app</span>

<span class="c1"># Transform section specifies one or more macros that AWS CloudFormation uses to process your template</span>
<span class="c1"># https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/transform-section-structure.html</span>
<span class="na">Transform</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">AWS::Serverless-2016-10-31</span>

<span class="c1"># Resources declares the AWS resources that you want to include in the stack</span>
<span class="c1"># https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resources-section-structure.html</span>
<span class="na">Resources</span><span class="pi">:</span>
  <span class="c1"># Each Lambda function is defined by properties:</span>
  <span class="c1"># https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#awsserverlessfunction</span>

  <span class="c1"># This is a Lambda function config associated with the source code: hello-from-lambda.js</span>
  <span class="na">helloFromLambdaFunction</span><span class="pi">:</span>
    <span class="na">Type</span><span class="pi">:</span> <span class="s">AWS::Serverless::Function</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="na">Handler</span><span class="pi">:</span> <span class="s">src/handlers/hello-from-lambda.helloFromLambdaHandler</span>
      <span class="na">Runtime</span><span class="pi">:</span> <span class="s">nodejs14.x</span>
      <span class="na">Architectures</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">x86_64</span>
      <span class="na">MemorySize</span><span class="pi">:</span> <span class="m">128</span>
      <span class="na">Timeout</span><span class="pi">:</span> <span class="m">100</span>
      <span class="na">Description</span><span class="pi">:</span> <span class="s">A Lambda function that returns a static string.</span>
      <span class="na">Policies</span><span class="pi">:</span>
        <span class="c1"># Give Lambda basic execution Permission to the helloFromLambda</span>
        <span class="pi">-</span> <span class="s">AWSLambdaBasicExecutionRole</span>
</pre></table></code></div></div><h4 id="add-an-api-gateway"><span class="mr-2">Add an API Gateway</span><a href="#add-an-api-gateway" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>To add an API (Amazon API Gateway) to your Lambda Function you will have to update inside the properties by adding <code class="language-plaintext highlighter-rouge">Events</code> as follows:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="na">Resources</span><span class="pi">:</span>
  <span class="na">HelloWorldFunction</span><span class="pi">:</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="s">...</span>
      <span class="s">Events</span><span class="err">:</span>
        <span class="na">HelloWorld</span><span class="pi">:</span>
          <span class="na">Type</span><span class="pi">:</span> <span class="s">Api</span>
          <span class="na">Properties</span><span class="pi">:</span>
            <span class="na">Path</span><span class="pi">:</span> <span class="s">/</span>
            <span class="na">Method</span><span class="pi">:</span> <span class="s">get</span>
</pre></table></code></div></div><p>And you have to create in <code class="language-plaintext highlighter-rouge">events</code> folder the json definition of the method:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"httpMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h4 id="add-an-scheduled-event"><span class="mr-2">Add an scheduled event</span><a href="#add-an-scheduled-event" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Include a scheduled event is pretty similar to add an API.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="na">Resources</span><span class="pi">:</span>
  <span class="na">HelloWorldFunction</span><span class="pi">:</span>
    <span class="na">Properties</span><span class="pi">:</span>
      <span class="s">...</span>
      <span class="s">Events</span><span class="err">:</span>
        <span class="na">CloudWatchEvent</span><span class="pi">:</span>
          <span class="na">Type</span><span class="pi">:</span> <span class="s">Schedule</span>
          <span class="na">Properties</span><span class="pi">:</span>
            <span class="na">Schedule</span><span class="pi">:</span> <span class="s">cron(0 * * * ? *)</span>
</pre></table></code></div></div><p>And you have to create in <code class="language-plaintext highlighter-rouge">events</code> folder the json definition of the rule:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cdc73f9d-aea9-11e3-9d5a-835b769c0d9c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"detail-type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Scheduled Event"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aws.events"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"us-west-2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"arn:aws:events:us-west-2:xxxxxxxxxxxx:rule/ExampleRule"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h4 id="more-examples"><span class="mr-2">More examples</span><a href="#more-examples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote class="prompt-tip"><div><p>I recommend that you run <code class="language-plaintext highlighter-rouge">aws sam init</code> and ty to create different projects from the templates.</p></div></blockquote><p>More information about template anatomy <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-anatomy.html" target="_blank">here</a></p><h3 id="prerequisites"><span class="mr-2">Prerequisites</span><a href="#prerequisites" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>AWS CLI<ul><li><a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" target="_blank">how to install it</a><li><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html" target="_blank">how configure it</a></ul><li>AWS SAM CLI (<a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html" target="_blank">here</a>)</ul><h2 id="sam-application"><span class="mr-2">SAM application</span><a href="#sam-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To keep it simple, we will create a SAM application from a <code class="language-plaintext highlighter-rouge">quick start template</code> using the <code class="language-plaintext highlighter-rouge">standalone function</code> but you could try a different template if you wish.</p><blockquote class="prompt-info"><div><p>The code example is available <a href="https://github.com/alazaroc/aws-sam-app" target="_blank">here</a>. If you want to see the step by step you can check the <a href="https://github.com/alazaroc/aws-sam-app/commits/main" target="_blank">commit history</a>, where you can find the evolution of the application through the steps explained in the following lines.</p></div></blockquote><p>These are all the steps that I want to show you in this article:</p><ul><li>Step 1: Download a sample SAM application<li>Step 2 (Optional): Test your application locally<li>Step 3 (Optional): Unit test<li>Step 4: Build your application<li>Step 5: Deploy manually your application with the CLI<li>Step 6 (Optional): AWS SAM Accelerate (Preview) - Sync</ul><h3 id="step-1-download-a-sample-sam-application"><span class="mr-2">Step 1: Download a sample SAM application</span><a href="#step-1-download-a-sample-sam-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The first step is to create our application through a quick start template: <code class="language-plaintext highlighter-rouge">Standalone function</code>.</p><p>To create a new application from a template we run the <code class="language-plaintext highlighter-rouge">sam init</code> command.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>sam init
<span class="go">
Which template source would you like to use?
 1 - AWS Quick Start Templates
 2 - Custom Template Location
</span><span class="gp">Choice: &gt;</span><span class="w"> </span>1
<span class="go">
Choose an AWS Quick Start application template
 1 - Hello World Example
 2 - Multi-step workflow
 3 - Serverless API
 4 - Scheduled task
 5 - Standalone function
 6 - Data processing
 7 - Infrastructure event management
 8 - Machine Learning
</span><span class="gp">Template: &gt;</span><span class="w"> </span>5
<span class="go">
Which runtime would you like to use?
 1 - dotnetcore3.1
 2 - nodejs14.x
 3 - nodejs12.x
</span><span class="gp">Runtime: &gt;</span><span class="w"> </span>2
<span class="go">
Based on your selections, the only Package type available is Zip.
We will proceed to selecting the Package type as Zip.

Based on your selections, the only dependency manager available is npm.
We will proceed copying the template using npm.

</span><span class="gp">Project name [sam-app]: &gt;</span><span class="w"> </span>sam-app
<span class="go">
Cloning from https://github.com/aws/aws-sam-cli-app-templates (process may take a moment)

    -----------------------
    Generating application:
    -----------------------
    Name: sam-app
    Runtime: nodejs14.x
    Architectures: x86_64
    Dependency Manager: npm
    Application Template: quick-start-from-scratch
    Output Directory: .

    Next steps can be found in the README file at ./sam-app/README.md


    Commands you can use next
    =========================
    [*] Create pipeline: cd sam-app &amp;&amp; sam pipeline init --bootstrap
    [*] Test Function in the Cloud: sam sync --stack-name {stack-name} --watch
</span></pre></table></code></div></div><blockquote class="prompt-info"><div><p>Note that at the end of the command line messages, <code class="language-plaintext highlighter-rouge">Commands you can use next</code> appears where other SAM CLI commands are suggested as the next steps to execute.</p></div></blockquote><p>This is the basic application that has been created (only with one lambda function for easy understanding):</p><p><a href="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-code-basic.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-code-basic.png" alt="sam-code-basic" class="lazyload" data-proofer-ignore></a></p><p>Note that we have 4 of the 5 files that we reviewed before:</p><ul><li>src/handlers/hello-from-lambda.js<li><em>_test_</em>/unit/handlers/hello-from-lambda.test.js<li>template.yaml<li>package.json</ul><p>We don’t have the folder <code class="language-plaintext highlighter-rouge">events</code> because we only create one simple Lambda Function with no event integrations</p><h3 id="step-2-optional-test-your-application-locally"><span class="mr-2">Step 2 (Optional): Test your application locally</span><a href="#step-2-optional-test-your-application-locally" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The AWS SAM CLI provides the <code class="language-plaintext highlighter-rouge">sam local</code> command to run your application using Docker containers that simulate the execution environment of Lambda.</p><p>Invoke your Lambda function running <code class="language-plaintext highlighter-rouge">sam local invoke</code>:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>sam <span class="nb">local </span>invoke
<span class="go">Invoking src/handlers/hello-from-lambda.helloFromLambdaHandler (nodejs14.x)
Skip pulling image and use local one: public.ecr.aws/sam/emulation-nodejs14.x:rapid-1.43.0-x86_64.

Mounting /Users/alazaroc/Documents/MyProjects/github/aws/sam/sam-app as /var/task:ro,delegated inside runtime container
</span><span class="gp">START RequestId: c8b494ab-a1db-48b7-8f50-f9a93e1305ef Version: $</span>LATEST
<span class="go">2022-04-08T18:55:39.230Z c8b494ab-a1db-48b7-8f50-f9a93e1305ef INFO Hello from Lambda!
END RequestId: c8b494ab-a1db-48b7-8f50-f9a93e1305ef
REPORT RequestId: c8b494ab-a1db-48b7-8f50-f9a93e1305ef Init Duration: 1.55 ms Duration: 363.29 ms Billed Duration: 364 ms Memory Size: 128 MB Max Memory Used: 128 MB
"Hello from Lambda!"
</span></pre></table></code></div></div><p>We received the response <kbd>"Hello from Lambda!"</kbd> and more useful information (Duration, Billed Duration, Memory Size, or Max Memory Used).</p><p>If you have more than one Lambda Function, you must add the name which appears in the <code class="language-plaintext highlighter-rouge">template.yaml</code> file.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>sam <span class="nb">local </span>invoke <span class="s2">"helloFromLambdaFunction"</span>
<span class="go">Invoking src/handlers/hello-from-lambda.helloFromLambdaHandler (nodejs14.x)
Skip pulling image and use local one: public.ecr.aws/sam/emulation-nodejs14.x:rapid-1.43.0-x86_64.

Mounting /Users/alazaroc/Documents/MyProjects/github/aws/sam/sam-app as /var/task:ro,delegated inside runtime container
</span><span class="gp">START RequestId: dc41d97d-0867-4516-94d9-d1830192565e Version: $</span>LATEST
<span class="go">2022-04-08T18:56:44.834Z dc41d97d-0867-4516-94d9-d1830192565e INFO Hello from Lambda!
"Hello from Lambda!"END RequestId: dc41d97d-0867-4516-94d9-d1830192565e
REPORT RequestId: dc41d97d-0867-4516-94d9-d1830192565e Init Duration: 0.49 ms Duration: 224.97 ms Billed Duration: 225 ms Memory Size: 128 MB Max Memory Used: 128 MB
</span></pre></table></code></div></div><blockquote class="prompt-info"><div><p>You also can test an API locally if your SAM project includes it.</p><p>You should run <code class="language-plaintext highlighter-rouge">sam local start-api</code> command, which starts up a local endpoint that replicates your REST API endpoint.</p></div></blockquote><h3 id="step-3-optional-unit-test"><span class="mr-2">Step 3 (Optional): Unit test</span><a href="#step-3-optional-unit-test" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Tests are defined in the <strong>__tests__</strong> folder in this project. Use npm to install the <strong>Jest test framework</strong> and run unit tests.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>npm <span class="nb">install</span>
<span class="c">...
</span><span class="go">
</span><span class="gp">&gt;</span><span class="w"> </span>npm run <span class="nb">test</span>
<span class="go">
replaced-by-user-input@0.0.1 test
jest

jest-haste-map: Haste module naming collision: replaced-by-user-input
</span><span class="gp">  The following files share their name;</span><span class="w"> </span>please adjust your hasteImpl:
<span class="gp">    * &lt;rootDir&gt;</span>/package.json
<span class="gp">    * &lt;rootDir&gt;</span>/.aws-sam/build/helloFromLambdaFunction/package.json
<span class="go">
 PASS  __tests__/unit/handlers/hello-from-lambda.test.js
  ● Console

    console.info
      Hello from Lambda!

      at Object.helloFromLambdaHandler (src/handlers/hello-from-lambda.js:9:13)

 PASS  .aws-sam/build/helloFromLambdaFunction/__tests__/unit/handlers/hello-from-lambda.test.js
  ● Console

    console.info
      Hello from Lambda!

      at Object.helloFromLambdaHandler (.aws-sam/build/helloFromLambdaFunction/src/handlers/hello-from-lambda.js:9:13)


Test Suites: 2 passed, 2 total
Tests:       2 passed, 2 total
Snapshots:   0 total
Time:        1.854 s
Ran all test suites.
</span></pre></table></code></div></div><h3 id="step-4-build-your-application"><span class="mr-2">Step 4: Build your application</span><a href="#step-4-build-your-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The <code class="language-plaintext highlighter-rouge">sam build</code> command builds any dependencies that your application has, and copies your application source code to folders under <code class="language-plaintext highlighter-rouge">.aws-sam/build</code> to be zipped and uploaded to Lambda.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>sam build
<span class="go">Building codeuri: /Users/alazaroc/Documents/MyProjects/github/aws/sam/sam-app runtime: nodejs14.x metadata: {} architecture: x86_64 functions: ['helloFromLambdaFunction']
Running NodejsNpmBuilder:NpmPack
Running NodejsNpmBuilder:CopyNpmrcAndLockfile
Running NodejsNpmBuilder:CopySource
Running NodejsNpmBuilder:NpmInstall
Running NodejsNpmBuilder:CleanUpNpmrc
Running NodejsNpmBuilder:LockfileCleanUp

Build Succeeded

Built Artifacts  : .aws-sam/build
Built Template   : .aws-sam/build/template.yaml

Commands you can use next
=========================
[*] Invoke Function: sam local invoke
[*] Test Function in the Cloud: sam sync --stack-name {stack-name} --watch
[*] Deploy: sam deploy --guided
</span></pre></table></code></div></div><p>These are the new files of our SAM project:</p><p><a href="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-build-files.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-build-files.png" alt="sam-build-files" class="lazyload" data-proofer-ignore></a></p><h3 id="step-5-deploy-manually-your-application-with-the-cli"><span class="mr-2">Step 5: Deploy manually your application with the CLI</span><a href="#step-5-deploy-manually-your-application-with-the-cli" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now we want to deploy our application. We will do it now manually from CLI, although in <a href="/posts/how-to-add-ci-cd-to-my-sam-project/" target="_blank">this other article</a> I will do it with a pipeline (automatically).</p><blockquote class="prompt-tip"><div><p>Remember that AWS SAM uses AWS CloudFormation as the underlying deployment mechanism.</p></div></blockquote><p>As we don’t have a <strong>configuration file</strong> containing all the values, we are going to create one. We run the <code class="language-plaintext highlighter-rouge">sam deploy -- guided</code> command which will search as a first step if a <kbd>samconfig.toml</kbd> file exists and if not the AWS SAM CLI will ask us about the necessary information to deploy our application.</p><blockquote class="prompt-info"><div><p>The <code class="language-plaintext highlighter-rouge">sam deploy</code> command will package and upload the application artifacts to the S3 bucket, and deploys the application using AWS CloudFormation</p></div></blockquote><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>sam deploy <span class="nt">--guided</span>
<span class="go">
Configuring SAM deploy
======================

 Looking for config file [samconfig.toml] :  Not found

 Setting default arguments for 'sam deploy'
 =========================================
 Stack Name [sam-app]:
 AWS Region [eu-west-1]:
</span><span class="gp"> #</span>Shows you resources changes to be deployed and require a <span class="s1">'Y'</span> to initiate deploy
<span class="gp"> Confirm changes before deploy [y/N]: &gt;</span><span class="w"> </span>Y
<span class="gp"> #</span>SAM needs permission to be able to create roles to connect to the resources <span class="k">in </span>your template
<span class="gp"> Allow SAM CLI IAM role creation [Y/n]: &gt;</span><span class="w">
</span><span class="gp"> #</span>Preserves the state of previously provisioned resources when an operation fails
<span class="gp"> Disable rollback [y/N]: &gt;</span><span class="w">
</span><span class="gp"> Save arguments to configuration file [Y/n]: &gt;</span><span class="w">
</span><span class="gp"> SAM configuration file [samconfig.toml]: &gt;</span><span class="w">
</span><span class="gp"> SAM configuration environment [default]: &gt;</span><span class="w">
</span><span class="go">
 Looking for resources needed for deployment:
 Creating the required resources...
 Successfully created!
  Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-bymcog0ibyy0
  A different default S3 bucket can be set in samconfig.toml

 Saved arguments to config file
 Running 'sam deploy' for future deployments will use the parameters saved above.
 The above parameters can be changed by modifying samconfig.toml
 Learn more about samconfig.toml syntax at
 https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-config.html

Uploading to sam-app/c606de95995c9e6d65f310f130ccc787  5777 / 5777  (100.00%)

 Deploying with following values
 ===============================
 Stack name                   : sam-app
 Region                       : eu-west-1
 Confirm changeset            : True
 Disable rollback             : False
 Deployment s3 bucket         : aws-sam-cli-managed-default-samclisourcebucket-bymcog0ibyy0
 Capabilities                 : ["CAPABILITY_IAM"]
 Parameter overrides          : {}
 Signing Profiles             : {}

Initiating deployment
=====================
Uploading to sam-app/c3a5d8cf01d6af391d2863628b67fbbe.template  659 / 659  (100.00%)

Waiting for changeset to be created..

CloudFormation stack changeset
-----------------------------------------------------------------------------------------------------------------------------------------------------
Operation                             LogicalResourceId                     ResourceType                          Replacement
-----------------------------------------------------------------------------------------------------------------------------------------------------
+ Add                                 helloFromLambdaFunctionRole           AWS::IAM::Role                        N/A
+ Add                                 helloFromLambdaFunction               AWS::Lambda::Function                 N/A
-----------------------------------------------------------------------------------------------------------------------------------------------------

Changeset created successfully. arn:aws:cloudformation:eu-west-1:xxxxxxxxxxxx:changeSet/samcli-deploy1649445168/3355bdea-6549-4a2b-b486-94befe703b4d


Previewing CloudFormation changeset before deployment
======================================================
</span><span class="gp">Deploy this changeset? [y/N]: &gt;</span><span class="w"> </span>Y
<span class="go">
2022-04-08 21:13:08 - Waiting for stack create/update to complete

CloudFormation events from stack operations
-----------------------------------------------------------------------------------------------------------------------------------------------------
ResourceStatus                        ResourceType                          LogicalResourceId                     ResourceStatusReason
-----------------------------------------------------------------------------------------------------------------------------------------------------
CREATE_IN_PROGRESS                    AWS::IAM::Role                        helloFromLambdaFunctionRole           -
CREATE_IN_PROGRESS                    AWS::IAM::Role                        helloFromLambdaFunctionRole           Resource creation Initiated
CREATE_COMPLETE                       AWS::IAM::Role                        helloFromLambdaFunctionRole           -
CREATE_IN_PROGRESS                    AWS::Lambda::Function                 helloFromLambdaFunction               -
CREATE_IN_PROGRESS                    AWS::Lambda::Function                 helloFromLambdaFunction               Resource creation Initiated
CREATE_COMPLETE                       AWS::Lambda::Function                 helloFromLambdaFunction               -
CREATE_COMPLETE                       AWS::CloudFormation::Stack            sam-app                               -
-----------------------------------------------------------------------------------------------------------------------------------------------------

Successfully created/updated stack - sam-app in eu-west-1
</span></pre></table></code></div></div><p>Remember that the executed command will create the <code class="language-plaintext highlighter-rouge">samconfig.toml</code> file in our project to save the deployment configuration and be able to repeat it without configuration.</p><p><a href="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-deploy-guided-3.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-deploy-guided-3.png" alt="sam-deploy-guided-3" class="lazyload" data-proofer-ignore></a></p><p>From now on, to deploy our SAM project we just need to run the <code class="language-plaintext highlighter-rouge">sam deploy</code> command, so we run it but if we have no changes, the deployment will fail:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>sam deploy
<span class="go">File with same data already exists at sam-app/c606de95995c9e6d65f310f130ccc787, skipping upload

 Deploying with following values
 ===============================
 Stack name                   : sam-app
 Region                       : eu-west-1
 Confirm changeset            : True
 Disable rollback             : False
 Deployment s3 bucket         : aws-sam-cli-managed-default-samclisourcebucket-bymcog0ibyy0
 Capabilities                 : ["CAPABILITY_IAM"]
 Parameter overrides          : {}
 Signing Profiles             : {}

Initiating deployment
=====================
File with same data already exists at sam-app/c3a5d8cf01d6af391d2863628b67fbbe.template, skipping upload

Waiting for changeset to be created..
Error: No changes to deploy. Stack sam-app is up to date
</span></pre></table></code></div></div><h3 id="step-6-optional-aws-sam-accelerate-preview---sync"><span class="mr-2">Step 6 (Optional): AWS SAM Accelerate (Preview) - Sync</span><a href="#step-6-optional-aws-sam-accelerate-preview---sync" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We already have deployed our application in the cloud and you may want to synchronize the changes, i.e. <code class="language-plaintext highlighter-rouge">deploy the changes in real-time when we save the changes</code> (without running the deploy command).</p><blockquote class="prompt-info"><div><p>The <code class="language-plaintext highlighter-rouge">sync</code> command deploys your local changes to the AWS Cloud. Use sync to build, package, and deploy changes to your development environment as you iterate on your application. As a best practice, run sam sync after you finish iterating on your application to sync changes to your AWS CloudFormation stack.</p></div></blockquote><blockquote class="prompt-warning"><div><p>Be careful if you use this functionality.</p><p>First <code class="language-plaintext highlighter-rouge">it is in preview</code> and also as you will see in the next lines in the console: “The SAM CLI will use the AWS Lambda, Amazon API Gateway, and AWS StepFunctions APIs to <code class="language-plaintext highlighter-rouge">upload your code without performing a CloudFormation deployment. This will cause drift in your CloudFormation stack</code>.”</p><p><kbd>The sync command should only be used against a development stack</kbd>.</p></div></blockquote><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>sam <span class="nb">sync</span> <span class="nt">--stack-name</span> sam-app <span class="nt">--watch</span>
<span class="go">
Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-bymcog0ibyy0

Default capabilities applied: ('CAPABILITY_NAMED_IAM', 'CAPABILITY_AUTO_EXPAND')
To override with customized capabilities, use --capabilities flag or set it in samconfig.toml

This feature is currently in beta. Visit the docs page to learn more about the AWS Beta terms https://aws.amazon.com/service-terms/.

The SAM CLI will use the AWS Lambda, Amazon API Gateway, and AWS StepFunctions APIs to upload your code without
performing a CloudFormation deployment. This will cause drift in your CloudFormation stack.
**The sync command should only be used against a development stack**.

Confirm that you are synchronizing a development stack and want to turn on beta features.

Enter Y to proceed with the command, or enter N to cancel:
</span><span class="gp"> [y/N]: &gt;</span><span class="w"> </span>Y
<span class="go">
Experimental features are enabled for this session.
Visit the docs page to learn more about the AWS Beta terms https://aws.amazon.com/service-terms/.

Queued infra sync. Wating for in progress code syncs to complete...
Starting infra sync.
Manifest file is changed (new hash: c448eb733590e1cea85b58f147c47f01) or dependency folder (.aws-sam/deps/c14e7b11-e157-4aea-a19b-97b33b39cef5) is missing for c14e7b11-e157-4aea-a19b-97b33b39cef5, downloading dependencies and copying/building source
Building codeuri: /Users/alazaroc/Documents/MyProjects/github/aws/sam/sam-app runtime: nodejs14.x metadata: {} architecture: x86_64 functions: ['helloFromLambdaFunction']
Running NodejsNpmBuilder:NpmPack
Running NodejsNpmBuilder:CopyNpmrcAndLockfile
Running NodejsNpmBuilder:CopySource
Running NodejsNpmBuilder:NpmInstall
Running NodejsNpmBuilder:CleanUp
Clean up action: .aws-sam/deps/c14e7b11-e157-4aea-a19b-97b33b39cef5 does not exist and will be skipped.
Running NodejsNpmBuilder:MoveDependencies
Running NodejsNpmBuilder:CleanUpNpmrc
Running NodejsNpmBuilder:LockfileCleanUp
Running NodejsNpmBuilder:LockfileCleanUp

Build Succeeded

Successfully packaged artifacts and wrote output template to file /var/folders/wq/bz6xngtx5h3f5gf8py3kf28c0000gn/T/tmp6076iix4.
Execute the following command to deploy the packaged template
</span><span class="gp">sam deploy --template-file /var/folders/wq/bz6xngtx5h3f5gf8py3kf28c0000gn/T/tmp6076iix4 --stack-name &lt;YOUR STACK NAME&gt;</span><span class="w">
</span><span class="go">

 Deploying with following values
 ===============================
 Stack name                   : sam-app
 Region                       : eu-west-1
 Disable rollback             : False
 Deployment s3 bucket         : aws-sam-cli-managed-default-samclisourcebucket-bymcog0ibyy0
 Capabilities                 : ["CAPABILITY_NAMED_IAM", "CAPABILITY_AUTO_EXPAND"]
 Parameter overrides          : {}
 Signing Profiles             : null

Initiating deployment
=====================

2022-04-08 21:34:02 - Waiting for stack create/update to complete

CloudFormation events from stack operations
-----------------------------------------------------------------------------------------------------------------------------------------------------
ResourceStatus                        ResourceType                          LogicalResourceId                     ResourceStatusReason
-----------------------------------------------------------------------------------------------------------------------------------------------------
UPDATE_IN_PROGRESS                    AWS::CloudFormation::Stack            sam-app                               Transformation succeeded
CREATE_IN_PROGRESS                    AWS::CloudFormation::Stack            AwsSamAutoDependencyLayerNestedStac   -
CREATE_IN_PROGRESS                    AWS::CloudFormation::Stack            AwsSamAutoDependencyLayerNestedStac   Resource creation Initiated
CREATE_COMPLETE                       AWS::CloudFormation::Stack            AwsSamAutoDependencyLayerNestedStac   -
UPDATE_IN_PROGRESS                    AWS::Lambda::Function                 helloFromLambdaFunction               -
UPDATE_COMPLETE                       AWS::Lambda::Function                 helloFromLambdaFunction               -
UPDATE_COMPLETE_CLEANUP_IN_PROGRESS   AWS::CloudFormation::Stack            sam-app                               -
UPDATE_COMPLETE                       AWS::CloudFormation::Stack            sam-app                               -
-----------------------------------------------------------------------------------------------------------------------------------------------------

Stack update succeeded. Sync infra completed.

{'StackId': 'arn:aws:cloudformation:eu-west-1:xxxxxxxxxxxx:stack/sam-app/e17d9780-b76f-11ec-a123-02591afab591', 'ResponseMetadata': {'RequestId': 'c726d9ed-ba77-473c-9155-9e05cc7ee0c7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'x-amzn-requestid': 'c726d9ed-ba77-473c-9155-9e05cc7ee0c7', 'content-type': 'text/xml', 'content-length': '377', 'date': 'Fri, 08 Apr 2022 19:34:02 GMT'}, 'RetryAttempts': 0}}
Infra sync completed.
</span></pre></table></code></div></div><p>The console still listens for changes and if we change our lambda code and save it:</p><p><a href="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-sync-lambda.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-sync-lambda.png" alt="sam-sync-lambda" class="lazyload" data-proofer-ignore></a></p><p>The console will be updated automatically as follow:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="go">Syncing Lambda Function helloFromLambdaFunction...
Manifest is not changed for c14e7b11-e157-4aea-a19b-97b33b39cef5, running incremental build
Building codeuri: /Users/alazaroc/Documents/MyProjects/github/aws/sam/sam-app runtime: nodejs14.x metadata: {} architecture: x86_64 functions: ['helloFromLambdaFunction']
download_dependencies is False and dependencies_dir is None. Copying the source files into the artifacts directory.
Running NodejsNpmBuilder:NpmPack
Running NodejsNpmBuilder:CopyNpmrcAndLockfile
Running NodejsNpmBuilder:CopySource
Running NodejsNpmBuilder:CleanUpNpmrc
Running NodejsNpmBuilder:LockfileCleanUp
Running NodejsNpmBuilder:LockfileCleanUp
Finished syncing Lambda Function helloFromLambdaFunction.
</span></pre></table></code></div></div><p>When you stop it (<code class="language-plaintext highlighter-rouge">control + C</code>) in the console it will appear:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="go">Shutting down sync watch...
Sync watch stopped.
</span></pre></table></code></div></div><blockquote class="prompt-info"><div><p>When you executed the sync command, a nested stack associated with your main stack (sam-app) was created:</p><p><a href="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-nested-stack.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-04-05-how-to-create-serverless-applications-with-sam/sam-nested-stack.png" alt="sam-nested-stack" class="lazyload" data-proofer-ignore></a></p><p>And when the console stops being synchronized, this nested stack is NOT deleted.</p></div></blockquote><p>How to <strong>remove the nested stack</strong> created with the sync command?</p><p>You have to run the <code class="language-plaintext highlighter-rouge">sam deploy</code> command again:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>sam deploy
<span class="go">File with same data already exists at sam-app/c606de95995c9e6d65f310f130ccc787, skipping upload

 Deploying with following values
 ===============================
 Stack name                   : sam-app
 Region                       : eu-west-1
 Confirm changeset            : True
 Disable rollback             : False
 Deployment s3 bucket         : aws-sam-cli-managed-default-samclisourcebucket-bymcog0ibyy0
 Capabilities                 : ["CAPABILITY_IAM"]
 Parameter overrides          : {}
 Signing Profiles             : {}

Initiating deployment
=====================
File with same data already exists at sam-app/c3a5d8cf01d6af391d2863628b67fbbe.template, skipping upload

Waiting for changeset to be created..

CloudFormation stack changeset
-----------------------------------------------------------------------------------------------------------------------------------------------------
Operation                             LogicalResourceId                     ResourceType                          Replacement
-----------------------------------------------------------------------------------------------------------------------------------------------------
* Modify                              helloFromLambdaFunction               AWS::Lambda::Function                 False
- Delete                              AwsSamAutoDependencyLayerNestedStac   AWS::CloudFormation::Stack            N/A
-----------------------------------------------------------------------------------------------------------------------------------------------------

Changeset created successfully. arn:aws:cloudformation:eu-west-1:xxxxxxxxxxxx:changeSet/samcli-deploy1649447607/790db35a-524f-48c5-af5c-1239e1b8fe92


Previewing CloudFormation changeset before deployment
======================================================
</span><span class="gp">Deploy this changeset? [y/N]: &gt;</span><span class="w"> </span>Y
<span class="go">
2022-04-08 21:53:42 - Waiting for stack create/update to complete

CloudFormation events from stack operations
-----------------------------------------------------------------------------------------------------------------------------------------------------
ResourceStatus                        ResourceType                          LogicalResourceId                     ResourceStatusReason
-----------------------------------------------------------------------------------------------------------------------------------------------------
UPDATE_IN_PROGRESS                    AWS::Lambda::Function                 helloFromLambdaFunction               -
UPDATE_COMPLETE                       AWS::Lambda::Function                 helloFromLambdaFunction               -
UPDATE_COMPLETE_CLEANUP_IN_PROGRESS   AWS::CloudFormation::Stack            sam-app                               -
DELETE_IN_PROGRESS                    AWS::CloudFormation::Stack            AwsSamAutoDependencyLayerNestedStac   -
DELETE_COMPLETE                       AWS::CloudFormation::Stack            AwsSamAutoDependencyLayerNestedStac   -
UPDATE_COMPLETE                       AWS::CloudFormation::Stack            sam-app                               -
-----------------------------------------------------------------------------------------------------------------------------------------------------

Successfully created/updated stack - sam-app in eu-west-1
</span></pre></table></code></div></div><h3 id="step-7-clean-up"><span class="mr-2">Step 7: Clean up</span><a href="#step-7-clean-up" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We only have one stack in our AWS Account.</p><p>To delete it, you can run the <code class="language-plaintext highlighter-rouge">sam delete</code> command which deletes the main stack (sam-app).</p><h2 id="next-steps"><span class="mr-2">Next steps</span><a href="#next-steps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>If you need more information about SAM I recommend you to visit the AWS documentation <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/what-is-sam.html" target="_blank">here</a><li>Next post: <a href="/posts/how-to-add-ci-cd-to-my-sam-project/" target="_blank">How to add CI/CD to my SAM project</a><li>Comment this post</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/serverless/'>Serverless</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/how-to/" class="post-tag no-text-decoration" >how-to</a> <a href="/tags/sam/" class="post-tag no-text-decoration" >sam</a> <a href="/tags/iac/" class="post-tag no-text-decoration" >iac</a> <a href="/tags/serverless/" class="post-tag no-text-decoration" >serverless</a> <a href="/tags/github/" class="post-tag no-text-decoration" >github</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=How%20to%20create%20serverless%20applications%20with%20SAM%20-%20Playing%20AWS&url=https%3A%2F%2Fwww.playingaws.com%2F%2Fposts%2Fhow-to-create-serverless-applications-with-sam%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.playingaws.com%2F%2Fposts%2Fhow-to-create-serverless-applications-with-sam%2F&text=How%20to%20create%20serverless%20applications%20with%20SAM%20-%20Playing%20AWS" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.playingaws.com%2F%2Fposts%2Fhow-to-create-serverless-applications-with-sam%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading"></div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/aws-open-source-tools/">Getting started with AWS open-source tools</a><li><a href="/posts/getting-started-with-aws-security/">Getting Started with AWS Security</a><li><a href="/posts/how-to-improve-your-account-security/">How to improve your account security</a></ul></div><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/challenge-data-certification-in-30-days/">Challenge: 'AWS Certified Data Analytics Specialty' in 30 days</a><li><a href="/posts/10-steps-to-prepare-any-aws-certification/">10 steps to prepare any AWS certification</a><li><a href="/posts/aws-control-tower-deep-dive/">AWS Control Tower Deep Dive</a><li><a href="/posts/the-technology-behind-this-blog/">How I decided on the technology behind the blog</a><li><a href="/posts/multi-account-approach/">Getting started with AWS Multi-account approach</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/how-to/">how-to</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/iac/">iac</a> <a class="post-tag" href="/tags/getting-started/">getting-started</a> <a class="post-tag" href="/tags/cdk/">cdk</a> <a class="post-tag" href="/tags/deep-dive/">deep dive</a> <a class="post-tag" href="/tags/serverless/">serverless</a> <a class="post-tag" href="/tags/certification/">certification</a> <a class="post-tag" href="/tags/open-source/">open-source</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/how-to-deploy-serverless-website-with-terraform/"><div class="card-body"> <em class="small" data-ts="1683312780" data-df="ll" > May 5, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to deploy a serverless website with Terraform</h3><div class="text-muted small"><p> Introduction As you already know, creating and managing infrastructure can be a complex and time-consuming process, and fortunately, tools like Terraform can simplify this process by allowing yo...</p></div></div></a></div><div class="card"> <a href="/posts/how-to-add-ci-cd-to-my-sam-project/"><div class="card-body"> <em class="small" data-ts="1649580780" data-df="ll" > Apr 10, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to add CI/CD to my SAM project</h3><div class="text-muted small"><p> Introduction This is the second article of SAM. In this other article I had explained how to create serverless applications with SAM, and there I explained all the basic SAM information, so y...</p></div></div></a></div><div class="card"> <a href="/posts/how-to-create-serverless-applications-with-cdk-and-sam/"><div class="card-body"> <em class="small" data-ts="1650912300" data-df="ll" > Apr 25, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to create serverless applications with CDK and SAM</h3><div class="text-muted small"><p> TLDR A serverless application is more than just a Lambda Function. It is a combination of Lambda functions, event sources, APIs, databases, and other resources that work together to perform t...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/how-to-add-ci-cd-to-my-cdk-project/" class="btn btn-outline-primary" prompt="Older"><p>How to add CI/CD to my CDK project</p></a> <a href="/posts/how-to-add-ci-cd-to-my-sam-project/" class="btn btn-outline-primary" prompt="Newer"><p>How to add CI/CD to my SAM project</p></a></div><script type="text/javascript"> document.getElementsByClassName("post-content")[0].innerHTML += '<h2 id="comment-this-post">Comment this post</h2>'; document.getElementsByClassName("post-content")[0].innerHTML += '<p>I hope this content has been relevant to you. To help me improve it would be helpful if you could give me your honest feedback.</p>'; $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "alazaroc/blog-web", "data-repo-id": "R_kgDOHA-hqQ", "data-category": "Announcements", "data-category-id": "DIC_kwDOHA-hqc4CT2E5", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "top", "data-lang": "", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementsByClassName("post-content")[0].appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/how-to/">how-to</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/iac/">iac</a> <a class="post-tag" href="/tags/getting-started/">getting-started</a> <a class="post-tag" href="/tags/cdk/">cdk</a> <a class="post-tag" href="/tags/deep-dive/">deep dive</a> <a class="post-tag" href="/tags/serverless/">serverless</a> <a class="post-tag" href="/tags/certification/">certification</a> <a class="post-tag" href="/tags/open-source/">open-source</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://www.linkedin.com/in/alejandro-lazaro-chueca/">Alejandro Lazaro</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Deployed with AWS resources.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-HW1NDPDLBF"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-HW1NDPDLBF'); }); </script>
