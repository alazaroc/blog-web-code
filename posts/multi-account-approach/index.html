<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Getting started with AWS Multi-account approach" /><meta property="og:locale" content="en" /><meta name="description" content="This is the first article related to the multi-account approach, and the first thing to review is to know when and why I need a multi-account solution." /><meta property="og:description" content="This is the first article related to the multi-account approach, and the first thing to review is to know when and why I need a multi-account solution." /><link rel="canonical" href="https://www.playingaws.com//posts/multi-account-approach/" /><meta property="og:url" content="https://www.playingaws.com//posts/multi-account-approach/" /><meta property="og:site_name" content="Playing AWS" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-17T19:22:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Getting started with AWS Multi-account approach" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-10-22T21:39:16+02:00","datePublished":"2022-09-17T19:22:00+02:00","description":"This is the first article related to the multi-account approach, and the first thing to review is to know when and why I need a multi-account solution.","headline":"Getting started with AWS Multi-account approach","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.playingaws.com//posts/multi-account-approach/"},"url":"https://www.playingaws.com//posts/multi-account-approach/"}</script><title>Getting started with AWS Multi-account approach | Playing AWS</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Playing AWS"><meta name="application-name" content="Playing AWS"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/favicons/favicon.ico" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Playing AWS</a></div><div class="site-subtitle font-italic">Learn, remove barriers and practice</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://www.linkedin.com/in/alejandro-lazaro-chueca/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://github.com/alazaroc" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Getting started with AWS Multi-account approach</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"> <img src="/assets/img/header.jpeg" alt="header"><h1 data-toc-skip>Getting started with AWS Multi-account approach</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1663435320" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 17, 2022 </em> </span> <span> Updated <em class="" data-ts="1698003556" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 22, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/alejandro-lazaro-chueca/">Alejandro Lazaro</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2136 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><hr /><h2 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>This is the first article related to the multi-account approach, and the first thing to review is to know when and why I need a multi-account solution.</p><h3 id="when-do-you-need-a-multi-account-solution"><span class="mr-2">When do you need a multi-account solution?</span><a href="#when-do-you-need-a-multi-account-solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you are using AWS for your personal projects and you have a simple solution without many resources, it is not worth it. Or maybe your solution is not so simple but you don’t want to worry about the additional operational overhead to manage it. I understand it. This was exactly my case but in this article, I want to show you when, why and how to deploy a multi-account solution.</p><p>However, in enterprise solutions, you should have a multi-account solution, without a doubt, so you need to know about it.</p><p>Then, for me, it is very simple:</p><ul><li>Personal account with simple solution - not necessary multi-account solution<li>Personal account with no simple solution or many workloads - depends on you<li>Small enterprise solution - depends on you, but even if your company is small is a good idea to take advantage of the multi-account approach<li>Medium/Big enterprise solution - mandatory</ul><p>What AWS says?</p><blockquote class="prompt-info"><div><p>While you may begin your AWS journey with a single account, AWS recommends that you “<em>set up multiple accounts, as your workloads grow in size and complexity</em>”. Extracted from <a href="https://aws.amazon.com/organizations/getting-started/best-practices/?org_console" target="_blank">here</a></p><p>Also, “<em>If you have a single account today and either have production workloads in place or are considering deploying production workloads, we recommend that you transition to the use of multiple accounts so that you can gain the Benefits of using multiple AWS accounts.</em>” Extracted from <a href="https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/single-aws-account.html" target="_blank">here</a></p></div></blockquote><h3 id="why-do-you-need-a-multi-account-solution"><span class="mr-2">Why do you need a multi-account solution?</span><a href="#why-do-you-need-a-multi-account-solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The main reason to do it is <strong>isolation</strong>. An AWS account serves as a resource container and the easiest way to isolate resources is by using different accounts.</p><p>There are many reasons to use isolations:</p><ul><li>Environment isolation (testing/production): Apply distinct security controls by environment<li>Business units/workloads/applications/products isolation: Group workloads based on business purpose and ownership<li>Functional team isolation<li>Data isolation: Constrain access to sensitive data. This category includes data stores, which may be necessary because of legal restrictions</ul><p>Some other advantages of a multi-account solution are:</p><ul><li><strong>to manage security</strong> by using policy-based controls<li><strong>to simplify billing</strong> - You can use a tagging strategy and cost allocation tags to track your AWS costs on a detailed level in the same account but is much better to use multiple accounts to do the same.<li>Promote innovation and agility</ul><h3 id="the-disadvantage-of-a-multi-account-solution"><span class="mr-2">The disadvantage of a multi-account solution</span><a href="#the-disadvantage-of-a-multi-account-solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The main disadvantage if you want a multi-account solution is the <strong>management</strong> of all accounts (do it in the same way, create new accounts, duplicate efforts,… this is, mismanagement).</p><h2 id="multi-account-approach-aws-organizations"><span class="mr-2">Multi-account approach: AWS Organizations</span><a href="#multi-account-approach-aws-organizations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>AWS provides a resource to help you centrally manage and govern your environment: <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html" target="_blank">AWS Organizations</a></p><h3 id="core-concepts"><span class="mr-2">Core concepts</span><a href="#core-concepts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Organization</strong>: an entity to administer accounts as a single unit<li><strong>Account</strong>: standard AWS account that contains your AWS resources<li><strong>Organizational Units (OUs)</strong>: a container that helps you to organize your accounts into a hierarchy and make it easier to apply management controls<li><strong>Secure Control Policies (SCPs)</strong>: policies are used to limit what the principals in member accounts can do</ul><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-organizations-summary.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-organizations-summary.png" alt="aws-organizations-summary" class="lazyload" data-proofer-ignore></a></p><h3 id="features--advantages"><span class="mr-2">Features / Advantages</span><a href="#features--advantages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Free to use<li>Centralized management of your AWS accounts<li>Hierarchical grouping of your accounts (in Organizational Units - OUs)<li>Access control (IAM Identity Center, successor to AWS Single Sign-On)<li>Permission Management (apply Service Control Policies - SCPs)<li>Consolidated billing for all member accounts<li>Configure supported AWS services to perform actions in your organization.</ul><h3 id="aws-services-integration"><span class="mr-2">AWS Services integration</span><a href="#aws-services-integration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This is the full list of supported service integration with AWS Organizations service. I have included all the services because is important to know that AWS Organizations can help with many integrations and automatization in the new accounts.</p><ul class="prompt-info"><li>Amazon <strong>Detective</strong> (makes it easy to analyze, investigate, and quickly identify the root cause of potential security issues or suspicious activities)<li>Amazon <strong>DevOps Guru</strong> (analyze operational data and identify behaviors that deviate from normal operating patterns)<li>Amazon <strong>GuardDuty</strong> (help to identify unexpected and potentially unauthorized or malicious activity in your AWS environment)<li>Amazon <strong>Inspector</strong> (automated vulnerability management service that continually scans Amazon EC2 and container workloads for software vulnerabilities and unintended network exposure)<li>Amazon <strong>Macie</strong> (discover, classify, and help you protect your sensitive data in Amazon S3)<li>Amazon <strong>VPC IP Address Manager</strong> (makes it easier for you to plan, track, and monitor IP addresses for your AWS workloads)<li>Artifact (provides on-demand downloads of AWS security reports)<li>AWS <strong>Account Management</strong> (allow you to programmatically modify your account information and metadata)<li>AWS <strong>Audit Manager</strong> (helps you continuously audit your AWS usage)<li>AWS <strong>Backup</strong> (set policies to enforce automatic backups)<li>AWS <strong>Control Tower</strong> (straightforward way to set up and govern an AWS multi-account environment, following prescriptive best practices)<li>AWS <strong>Health</strong> (visibility into your resource performance and the availability of your AWS services and accounts)<li>AWS <strong>Marketplace</strong> - License Management<li>AWS <strong>Network Manager</strong> (centrally manage your AWS Cloud WAN core network and your AWS Transit Gateway network)<li>AWS <strong>Trusted Advisor</strong> (inspects your AWS environment and makes recommendations)<li><strong>CloudFormation StackSets</strong> (enables you to create, update, or delete stacks across multiple accounts and regions with a single operation)<li><strong>CloudTrail</strong> (enable governance, compliance, and operational and risk auditing of your AWS account)<li><strong>Compute Optimizer</strong> (recommends optimal AWS compute resources based on an analysis of the historical utilization metrics of your resources)<li><strong>Config</strong> (enables you to assess, audit, and evaluate the configurations of your AWS resources)<li><strong>Directory Service</strong> (share your AWS Managed Microsoft AD directories between other trusted AWS accounts in your organization)<li><strong>Firewall Manager</strong> (simplify AWS WAF administration and maintenance)<li><strong>IAM Access Analyzer</strong> (helps you set, verify, and refine permissions to grant the right fine-grained permissions)<li><strong>License Manager</strong> (brings software vendor licenses to the cloud)<li><strong>RAM</strong> (share AWS resources)<li><strong>S3 Storage Lens</strong> (aggregates your usage and activity metrics and displays the information in an interactive dashboard on the Amazon S3 console)<li><strong>Security Hub</strong> (provides you with a comprehensive view of the security state of your AWS resources)<li><strong>Service Catalog</strong> (enables you to create and manage catalogs of IT services that are approved for use on AWS)<li><strong>Service Quotas</strong> (enables you to view and manage your quotas from a central location)<li><strong>Single Sign-On</strong> (centrally provide and manage single sign-on access to all your AWS accounts)<li><strong>Systems Manager</strong> (enables visibility and control of your AWS resources)<li><strong>Tag policies</strong> (help you standardize tags across resources)</ul><h3 id="recommended-organization-structure-best-practices"><span class="mr-2">Recommended organization structure (best practices)</span><a href="#recommended-organization-structure-best-practices" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote class="prompt-warning"><div><p>The following recommendations need to be adapted to each Organization. Each case is different and you have to think about how grouping accounts and how many OUs you need.</p></div></blockquote><p>AWS recommends that you start with the central services in mind:</p><ul><li><strong>Security</strong>: Used for centralized security tooling and audit resources. Usually with at least 2 accounts (one for each of mentioned purposes)<li><strong>Infrastructure</strong>: You can use this level to share infrastructure with the other accounts: i.e. networking and IT services</ul><p>Once you have your foundational Organizational Units, is time to think about the environments, and separate SDLC (non-production) from production because usually have different requirements and you want each of them isolated. Although it can be a new OU categorization, is common to use it as a sub-categorization inside another OU level (for example Security and Infrastructure would have another 2 levels: SDLC and Prod).</p><blockquote class="prompt-danger"><div><p>EDIT: <strong>SDLC</strong> (Software Development Life Cycle) is used here because this article is based in the AWS recommendations and they use it for the name of one OU to include all the non-productive environments, for example <a href="https://aws.amazon.com/blogs/mt/best-practices-for-organizational-units-with-aws-organizations" target="_blank">here</a> and <a href="https://aws.amazon.com/organizations/getting-started/best-practices" target="_blank">here</a>. Btw, I “introduce” the concept of SDLC when I explain how to add CI/CD to my CDK project in <a href="/posts/how-to-add-ci-cd-to-my-cdk-project/" target="_blank">this other article</a>. Please, if you found some error there, please let me know!</p></div></blockquote><p>Now, we have to think about all the additional OUs that you need. AWS recommends creating OUs that directly relate to building or running your products or services:</p><ul><li>Sandbox<li>Workloads<li>Deployments<li>Suspended<li>Transitional<li>Exceptions<li>…</ul><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-recommended-ous-best-practices.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-recommended-ous-best-practices.png" alt="recommended-ous" class="lazyload" data-proofer-ignore></a></p><p>More information in the official AWS links:</p><ul><li><a href="https://aws.amazon.com/organizations/getting-started/best-practices/?org_console" target="_blank">https://aws.amazon.com/organizations/getting-started/best-practices/?org_console</a><li><a href="https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/recommended-ous-and-accounts.html" target="_blank">https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/recommended-ous-and-accounts.html</a><li><a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_best-practices.html" target="_blank">Best practices for management account and for member accounts</a><li><a href="https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/basic-organization.html" target="_blank">Basic organization</a></ul><h2 id="get-started-with-aws-organizations"><span class="mr-2">Get Started with AWS Organizations</span><a href="#get-started-with-aws-organizations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><kbd>AWS Organizations</kbd> is the service to help us with central management for multiple AWS accounts.</p><p>To start you only need an AWS account, access to the AWS Organizations and then click “Create an organization”:</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-organizations-step1.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-organizations-step1.png" alt="/assets/img/posts/2022-07-18-multi-account-approach/aws-organizations-step1.png" class="lazyload" data-proofer-ignore></a></p><p>When you do it, you could view the Organizational Structure of your Organization, and you will have in the left section of the screen the available options: send Invitations, configure supported services, enable policies, the Organization settings and a Get started option.</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-organizations-step2.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-organizations-step2.png" alt="/assets/img/posts/2022-07-18-multi-account-approach/aws-organizations-step2.png" class="lazyload" data-proofer-ignore></a></p><p>The Get started option is interesting as you can view the 4 steps to “Build your organization”:</p><ol><li>Create accounts or invite existing accounts<li>Organize your organization’s member accounts into OUs<li>Create policies<li>Enable AWS services that support AWS Organizations</ol><p>And also, a simplified recommended organizational structure</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/recommended-organization-structure.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/recommended-organization-structure.png" alt="recommended-organization-structure" class="lazyload" data-proofer-ignore></a></p><p>So perfect, now we know how to create an AWS Organization, we can create the different OUs we need, we can create new Accounts and send them an invitation to join our organization, and then configure the enabled services and apply the policies.</p><p>Easy? Not really… you can do it all manually if you need heavy customization, but it seems necessary to apply automation for efficient governance and management, and probably we need help to set up our landing zone.</p><blockquote><p>A landing zone is a well-architected, multi-account AWS environment that is a starting point from which you can deploy workloads and applications.</p></blockquote><p>Fortunately, AWS has another service to help us: <kbd>AWS Control Tower</kbd>.</p><h2 id="aws-control-tower"><span class="mr-2">AWS Control Tower</span><a href="#aws-control-tower" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote class="prompt-info"><div><p>AWS Control Tower offers the easiest way to set up and govern a new, secure, compliant, multi-account AWS environment. It establishes a <strong>landing zone</strong>, which is a well-architected, multi-account environment based on best-practice blueprints, and enables governance using <strong>guardrails</strong> you can choose. Guardrails are SCPs and AWS Config rules that implement governance for security, compliance, and operations.</p><p><strong>Q: What is the difference between AWS Control Tower and AWS Organizations?</strong></p><p>AWS Control Tower offers an abstracted, automated, and prescriptive experience on top of AWS Organizations. It automatically sets up AWS Organizations as the underlying AWS service to organize accounts and implements preventive guardrails using SCPs. Control Tower and Organizations work well together. You can use Control Tower to set up your environment and set guardrails, then using AWS Organizations, you can further create custom policies (such as tag, backup or SCPs) that centrally control the use of AWS services and resources across multiple AWS accounts.</p><p><a href="https://aws.amazon.com/organizations/faqs/" target="_blank">Extracted from the FAQS of AWS Organizations</a></p></div></blockquote><p>Now, we are going to create our Landing Zone using AWS Control Tower.</p><p>First, access the service and click on <code class="language-plaintext highlighter-rouge">Set up landing Zone</code>:</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-1.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-1.png" alt="aws-control-tower-1" class="lazyload" data-proofer-ignore></a></p><p>Then, review the first step, set the Home region, if you want to deny access to any Region in which AWS Control Tower is not available and your additional Region for governance:</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-2.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-2.png" alt="aws-control-tower-2" class="lazyload" data-proofer-ignore></a> <a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-3.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-3.png" alt="aws-control-tower-3" class="lazyload" data-proofer-ignore></a></p><p>Now set a name for the Foundational Organizational Unit (Security, with 2 accounts: log archive account and security audit account) and the Additional OU (Sandbox):</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-4.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-4.png" alt="aws-control-tower-4" class="lazyload" data-proofer-ignore></a></p><p>Then configure the shared accounts (Foundational OU - security), set an email associated with the new accounts and a name for these 2 accounts:</p><ul><li>Log archive: <em>The log archive account is a repository of immutable logs of API activities and resource configurations from all accounts.</em><li>Security audit: <em>The audit account is a restricted account. It allows your security and compliance teams to gain access to all accounts in the organization.</em></ul><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-5.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-5.png" alt="aws-control-tower-5" class="lazyload" data-proofer-ignore></a></p><p>Step 4 is to configure the CloudTrail and the encryption (disabled by default) <a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-6.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-6.png" alt="aws-control-tower-6" class="lazyload" data-proofer-ignore></a></p><p>Finally, you need to review all the information and confirm. Next, a new screen will be shown with the progress of the creation of the landing zone. The estimated time is 60 minutes.</p><blockquote class="prompt-info"><div><p>This is the summary of what is being set up:</p><ul><li><strong>2 organizational units</strong>, one for your shared accounts and one for accounts that will be provisioned by your users<li><strong>2 new accounts</strong>, for log archive and security audit<li><strong>A native cloud directory</strong> with preconfigured groups and single sign-on access<li><strong>20 preventive guardrails</strong> to enforce policies <strong>3 detective guardrails</strong> to detect configuration violations</ul></div></blockquote><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-7.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-7.png" alt="aws-control-tower-7" class="lazyload" data-proofer-ignore></a></p><p>With a little patience, you will receive the confirmation of everything was ok, and the setup of the landing zone will be complete:</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-8.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-8.png" alt="aws-control-tower-8" class="lazyload" data-proofer-ignore></a></p><p>The new structure created is very simple:</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-9.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-9.png" alt="aws-control-tower-9" class="lazyload" data-proofer-ignore></a></p><p>And a new AWS Identity Center configuration (previously AWS SSO) has been configured for you and now you can access this portal to access all your AWS accounts:</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-10.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-10.png" alt="aws-control-tower-10" class="lazyload" data-proofer-ignore></a></p><h3 id="clean-up"><span class="mr-2">Clean up</span><a href="#clean-up" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To clean up the AWS Control Tower you need to decommission it and then wait until 2 hours to remove all resources.</p><p><a href="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-11.png" class="popup img-link border"><img data-src="/assets/img/posts/2022-07-18-multi-account-approach/aws-control-tower-11.png" alt="aws-control-tower-11" class="lazyload" data-proofer-ignore></a></p><h2 id="next-steps"><span class="mr-2">Next steps</span><a href="#next-steps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Next post: <a href="/posts/aws-control-tower-deep-dive/" target="_blank">AWS Control Tower Deep Dive</a><li>Comment this post<li>More information<ul><li><a href="https://catalog.us-east-1.prod.workshops.aws/workshops/d3f60827-89f2-46a8-9be7-6e7185bd7665/en-US">Practice: Workshop of multi-account security governance workshop</a><li><a href="https://controltower.aws-management.tools/immersionday/">Practice: AWS Control Tower Immersion day</a><li><a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html#examples_general">Example of SCPs</a><li><a href="https://aws.amazon.com/blogs/architecture/lets-architect-architecting-for-governance-and-management/" target="_blank">AWS blog article: migrate AWS Accounts to AWS Control Tower</a><li><a href="https://aws.amazon.com/blogs/architecture/migrate-resources-between-aws-accounts/">AWS blog article: Migrate resources between accounts</a><li><a href="https://aws.amazon.com/solutions/implementations/landing-zone-accelerator-on-aws/">Landing Zone accelerator on AWS</a><li><a href="https://github.com/aws-samples/check-aws-resources-for-org-conditions">Dependency checker to migrate between AWS Organizations</a></ul></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/multi-account/'>Multi-account</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/getting-started/" class="post-tag no-text-decoration" >getting-started</a> <a href="/tags/multi-account/" class="post-tag no-text-decoration" >multi-account</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Getting%20started%20with%20AWS%20Multi-account%20approach%20-%20Playing%20AWS&url=https%3A%2F%2Fwww.playingaws.com%2F%2Fposts%2Fmulti-account-approach%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.playingaws.com%2F%2Fposts%2Fmulti-account-approach%2F&text=Getting%20started%20with%20AWS%20Multi-account%20approach%20-%20Playing%20AWS" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.playingaws.com%2F%2Fposts%2Fmulti-account-approach%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading"></div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/aws-open-source-tools/">Getting started with AWS open-source tools</a><li><a href="/posts/getting-started-with-aws-security/">Getting Started with AWS Security</a><li><a href="/posts/how-to-improve-your-account-security/">How to improve your account security</a></ul></div><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/challenge-data-certification-in-30-days/">Challenge: 'AWS Certified Data Analytics Specialty' in 30 days</a><li><a href="/posts/10-steps-to-prepare-any-aws-certification/">10 steps to prepare any AWS certification</a><li><a href="/posts/aws-control-tower-deep-dive/">AWS Control Tower Deep Dive</a><li><a href="/posts/the-technology-behind-this-blog/">How I decided on the technology behind the blog</a><li><a href="/posts/multi-account-approach/">Getting started with AWS Multi-account approach</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/how-to/">how-to</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/iac/">iac</a> <a class="post-tag" href="/tags/getting-started/">getting-started</a> <a class="post-tag" href="/tags/cdk/">cdk</a> <a class="post-tag" href="/tags/deep-dive/">deep dive</a> <a class="post-tag" href="/tags/serverless/">serverless</a> <a class="post-tag" href="/tags/certification/">certification</a> <a class="post-tag" href="/tags/open-source/">open-source</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/deepracer-first-steps-with-machine-learning/"><div class="card-body"> <em class="small" data-ts="1670351580" data-df="ll" > Dec 6, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>DeepRacer - First steps with Machine Learning</h3><div class="text-muted small"><p> Introduction Yes! Now that artificial intelligence bots are here to help everyone create content (and much more)… and since I like to do just the opposite, I’ve written this article from a perso...</p></div></div></a></div><div class="card"> <a href="/posts/aws-open-source-tools/"><div class="card-body"> <em class="small" data-ts="1674587700" data-df="ll" > Jan 24, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Getting started with AWS open-source tools</h3><div class="text-muted small"><p> Introduction This is the first part of a series of articles about open source software and AWS, in which I will share those tools that I have tested and that I think you may find useful. The co...</p></div></div></a></div><div class="card"> <a href="/posts/getting-started-with-aws-security/"><div class="card-body"> <em class="small" data-ts="1654018380" data-df="ll" > May 31, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Getting Started with AWS Security</h3><div class="text-muted small"><p> TLDR You have probably read many times that in AWS security is the TOP priority, and as you know there are many resources on the internet. I want to share with you in this article the **security...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/amazon-guardduty-deep-dive/" class="btn btn-outline-primary" prompt="Older"><p>Amazon GuardDuty: Deep dive</p></a> <a href="/posts/aws-control-tower-deep-dive/" class="btn btn-outline-primary" prompt="Newer"><p>AWS Control Tower Deep Dive</p></a></div><script type="text/javascript"> document.getElementsByClassName("post-content")[0].innerHTML += '<h2 id="comment-this-post">Comment this post</h2>'; document.getElementsByClassName("post-content")[0].innerHTML += '<p>I hope this content has been relevant to you. To help me improve it would be helpful if you could give me your honest feedback.</p>'; $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "alazaroc/blog-web", "data-repo-id": "R_kgDOHA-hqQ", "data-category": "Announcements", "data-category-id": "DIC_kwDOHA-hqc4CT2E5", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "top", "data-lang": "", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementsByClassName("post-content")[0].appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/how-to/">how-to</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/iac/">iac</a> <a class="post-tag" href="/tags/getting-started/">getting-started</a> <a class="post-tag" href="/tags/cdk/">cdk</a> <a class="post-tag" href="/tags/deep-dive/">deep dive</a> <a class="post-tag" href="/tags/serverless/">serverless</a> <a class="post-tag" href="/tags/certification/">certification</a> <a class="post-tag" href="/tags/open-source/">open-source</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://www.linkedin.com/in/alejandro-lazaro-chueca/">Alejandro Lazaro</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Deployed with AWS resources.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-HW1NDPDLBF"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-HW1NDPDLBF'); }); </script>
